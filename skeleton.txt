Introduction

	Problem macro

		Common lighting contributes a great deal to the total energy we consume per year.
		If we could get better insight in how an when lighting is used on a room level, we could save energy...
		The problem with recocgntion of lights, is that the same lights draw almost exactly the same amount of power.


	Contribution

		This aim of this thesis is to propose a combination of a single smart-meter and multiple smart-lights to better understand which lights are on at a given time.
		The smart-meter can be used for alternating current as well as direct current and the lights are based on readily available commercial LEDs.




State of the Art
	
	PLC, or power-line communication, is a communication protocol that uses electrical wiring to simultaneously carry both data, and alternating current.
	PLC is not as mature for direct current.
	PLC works by transmitting a carrier frequency over the power line and use for example frequency modulation to transmit date, much like radio waves.
	The power lines were not designed for transmitting date, they are not twisted and they are not shielded. 
	Which means they act like antennas and can cause interference with radio receivers, key fobs, etc..
	


Problems
	
	1. Find encoding techniques/codes that allow for multiple transmitters (LEDs) to to transmit at the same time over the same channel without interfering (too much) with eachother, so periodic and a-periodic (auto-) correlation.
		1.1. Codes that work synchronous.
		1.2. Codes that work a-synchronous.
		1.3. translation of radio bases codes (Gold, etc.) to binary values

	2. Investigate a simple commercial LED light and modify the circuit to modulate the light for VLC and for current modulation.

	3. Create a suitable circuit that would allow for multiple currenct modulations to super impose on eachother.

	4. Current source seems to be good solution, Next step build low voltage AC test bed with current source.

	5. Build 230v AC testbed with current source and commercial LED, that needs low voltage, to allow for more time modulating.

	6. (5) wastes some energy as a lower voltage is required than provided.

	7. Building a circuit which detects the zero crossing of the AC, so that it is known when modulating can and cannot take place (No Voltage means no current, means no information)
		7.1. External (small) voltage required by this circuits, provided by a switching power supply, will interfere with the nice flat current source 

	8. Suitable interface for microcontroller to measure the AC current. And decouple the 230v AC from the microcontroller for safety reasons 




Solutions

	1. Looking at the field of telecommunication, we can find Walsh-hadamard (Orthognal codes), PN-codes and gold-sequences
		1.1. Walsh-hadamard (Orthognal codes) work well in synchronous cases, as demonstrated/proves by matlab simulations etc..
		1.2. PN codes and Gold codes work in a-synchronous cases, with different levels of multiple access interference.
		1.3. Math proof and demo by Matlab sim etc.

	2. Buy a commercial light, open it, study circuit. Add transistors to modulate the light and current.

	3. Create a DC testbed which uses a current source to let the ciruict draw a constant current ( a flat curve). The current source can then by turned on and off via a microcontroller.

	4. Create a low voltage AC testbed with current source. Use series resistor (after rectification, for easier measurements) to measure current.

	5. Built another test bed.

	6. Use series capacitor to limit the power, without wasting the power. With a opto-triac to bypass the capacitor, for the modulation.

	7. Build circuit with potentiometer and transitor to set a certain treshold voltage and create a block wave to the micro controller.
		7.1. Utilize the circuit from (7) to charge a capacitor near the zero crossing to not interfere with the modulation but still manage to have a low voltage for the block wave generation.

	8. Series resistor most simple and effective (Hall sensor -like were not precise/fast enough), use a reference voltage for an external ADC and use voltage divider, add that to the voltage over the series resistor to account for the negative voltage when the AC is negative. Finally use a isolating chip to seperate the SPI communication from the ADC and the micro controller.





Evaluation

	1. Eval of the solution by matlab demos. 

	2. Pic. of scope, with exponential-like current draw. Not suitable for super position of multiple of these lights. Most likely problems: Capacitor and too many LEDs in series causing high starting voltage and little time for modulation.

	3. DC testbed has six individual controlable current sources with LEDs and series resistor to measure the current. (Unpolished) Software can show that the Orthogonal/PN/Gold codes with the binary equivalants can work in this configuration.

	4. (Unpolished) Software can show that the codes work

	5.

	6. It limits the power but also introduces phase shifting. This will put the zero crossing voltage for a light which is using the capacitor at a different point in time than a light which is using the capacitor. Which will make it difficult for super imposing...

	7. Can show on scope a sine wave and the block wave that the circuit creates.
		7.1. Can show on scope the charging of this capacitor near the zero crossing of AC and so between the block wave.

	8. Can sample at around 15 kSamples/s.